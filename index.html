<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ ü•©</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --red: #e63946;
            --red-light: #ff6b6b;
            --red-bg: #fff5f5;
            --dark: #1a1a2e;
            --card: #ffffff;
            --muted: #6b7280;
            --border: #f0d0d0;
            --surface: #fafafa;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Kanit', sans-serif;
            background: #f7eded;
            color: var(--dark);
            min-height: 100vh;
            padding-bottom: 140px;
        }

        /* ===== HEADER ===== */
        .header {
            background: var(--red);
            color: white;
            padding: 20px 16px 16px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(230,57,70,0.35);
        }

        .header h1 {
            font-size: 1.3rem;
            font-weight: 700;
            letter-spacing: 0.01em;
        }

        .header p {
            font-size: 0.75rem;
            opacity: 0.85;
            margin-top: 2px;
            font-weight: 300;
        }

        /* ===== ITEMS LIST ===== */
        .section-label {
            font-size: 0.7rem;
            font-weight: 600;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            color: var(--red);
            padding: 14px 16px 6px;
        }

        .item-card {
            background: var(--card);
            margin: 0 12px 8px;
            border-radius: 14px;
            padding: 14px 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border: 1px solid #f5e0e0;
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .item-name {
            font-size: 0.95rem;
            font-weight: 500;
            flex: 1;
            padding-right: 8px;
        }

        .item-price {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--red);
            background: var(--red-bg);
            padding: 3px 10px;
            border-radius: 20px;
            white-space: nowrap;
        }

        /* ===== FRIEND CHIPS ===== */
        .friends-row {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .friend-chip {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            border: 2px solid var(--border);
            background: var(--surface);
            color: var(--muted);
            transition: all 0.18s ease;
            user-select: none;
            -webkit-user-select: none;
        }

        .friend-chip.active {
            background: var(--red);
            border-color: var(--red);
            color: white;
            box-shadow: 0 2px 8px rgba(230,57,70,0.3);
        }

        .friend-chip .dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
            opacity: 0.7;
        }

        /* ===== STICKY SUMMARY BAR ===== */
        .summary-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--dark);
            color: white;
            z-index: 200;
            border-radius: 20px 20px 0 0;
            overflow: hidden;
            box-shadow: 0 -8px 30px rgba(0,0,0,0.2);
        }

        .summary-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 20px;
            cursor: pointer;
            background: var(--dark);
        }

        .summary-toggle .label {
            font-size: 0.85rem;
            font-weight: 500;
            opacity: 0.7;
        }

        .summary-toggle .total {
            font-size: 1rem;
            font-weight: 700;
            color: var(--red-light);
        }

        .chevron {
            font-size: 1.1rem;
            transition: transform 0.3s;
        }

        .summary-bar.open .chevron { transform: rotate(180deg); }

        .summary-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.35s ease;
            background: #12121f;
        }

        .summary-bar.open .summary-content {
            max-height: 400px;
        }

        .summary-inner {
            padding: 12px 16px 20px;
        }

        .person-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 14px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            margin-bottom: 8px;
        }

        .person-row .p-name {
            font-size: 0.95rem;
            font-weight: 500;
            color: #e0e0e0;
        }

        .person-row .p-amount {
            font-size: 1rem;
            font-weight: 700;
            color: var(--red-light);
        }

        .bill-check {
            text-align: center;
            font-size: 0.75rem;
            color: rgba(255,255,255,0.4);
            padding-top: 10px;
            padding-bottom: 4px;
        }

        /* ===== QUICK ALL-TOGGLE ===== */
        .all-toggle {
            display: flex;
            gap: 8px;
            padding: 4px 12px 8px;
        }
        .all-toggle button {
            flex: 1;
            padding: 6px;
            border: none;
            border-radius: 8px;
            font-family: 'Kanit', sans-serif;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
        }
        .btn-all { background: var(--red); color: white; }
        .btn-none { background: #e0e0e0; color: #555; }

        .divider {
            height: 1px;
            background: var(--border);
            margin: 4px 12px 8px;
            opacity: 0.5;
        }
    </style>
</head>
<body>

<div class="header">
    <h1>ü•© ‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ ‚Äî ‡∏´‡∏≤‡∏£‡∏Ñ‡πà‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h1>
    <p>‡∏Å‡∏î‡∏ä‡∏¥‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å/‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ß‡πà‡∏≤‡πÉ‡∏Ñ‡∏£‡∏Å‡∏¥‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡∏±‡πâ‡∏ô</p>
</div>

<div class="section-label">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏£‡∏ß‡∏° VAT)</div>

<div id="itemsList"></div>

<!-- Sticky Summary -->
<div class="summary-bar" id="summaryBar">
    <div class="summary-toggle" id="summaryToggle">
        <span class="label">üí∏ ‡∏¢‡∏≠‡∏î‡πÇ‡∏≠‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ô</span>
        <span class="total" id="quickTotal">0.00 ‡∏ø</span>
        <span class="chevron">‚ñ≤</span>
    </div>
    <div class="summary-content">
        <div class="summary-inner">
            <div id="personRows"></div>
            <div class="bill-check" id="billCheck"></div>
        </div>
    </div>
</div>

<script>
const items = [
    { name: "‡∏≠‡∏á‡∏∏‡πà‡∏ô‡πÑ‡∏ã‡∏ô‡πå", price: 189.00 },
    { name: "‡πÄ‡∏ö‡∏ö‡∏µ‡πâ‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó", price: 109.00 },
    { name: "‡πÄ‡∏ô‡∏¢‡∏™‡∏î‡∏à‡∏∑‡∏î", price: 109.00 },
    { name: "‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏õ‡∏¥‡∏î‡∏°‡∏¥‡∏î‡∏ä‡∏¥‡∏î 10‡∏Å‡∏Å.", price: 105.00 },
    { name: "‡πÄ‡∏Å‡∏£‡∏ã‡∏ä‡∏≤‡∏° 500 ‡∏°‡∏•", price: 99.00 },
    { name: "‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡∏õ‡∏£‡∏∞‡∏†‡∏≤‡∏®‡∏£‡∏µ", price: 58.00 },
    { name: "Seafood 500‡∏Å", price: 58.00 },
    { name: "‡πÄ‡∏´‡πá‡∏î‡∏≠‡∏≠‡∏£‡∏¥‡∏ô‡∏à‡∏¥", price: 55.00 },
    { name: "‡∏°‡∏∞‡∏ô‡∏≤‡∏ß‡πÅ‡∏õ‡πâ‡∏ô", price: 35.00 },
    { name: "‡∏´‡∏≠‡∏°‡πÉ‡∏´‡∏ç‡πà‡∏ô‡∏≠‡∏Å", price: 22.00 },
    { name: "‡∏ú‡∏±‡∏Å‡∏™‡∏•‡∏±‡∏î‡πÇ‡∏≠‡πá‡∏Ñ RPF", price: 35.00 },
    { name: "‡∏ú‡∏±‡∏Å‡∏™‡∏•‡∏±‡∏î‡∏Ñ‡∏≠‡∏™ RPF", price: 35.00 },
    { name: "‡∏ú‡∏±‡∏Å‡∏Å‡∏ß‡∏≤‡∏á‡∏ï‡∏∏‡πâ‡∏á‡πÑ‡∏ï‡πâ‡∏´‡∏ß‡∏±‡∏ô", price: 19.00 },
    { name: "‡πÄ‡∏•‡∏°‡∏≠‡∏ô‡∏ô‡∏≠‡∏Å", price: 15.00 },
    { name: "‡πÄ‡∏´‡πá‡∏î‡πÄ‡∏Ç‡πá‡∏°‡∏ó‡∏≠‡∏á", price: 15.00 },
    { name: "CB_‡πÄ‡∏Å‡∏≤‡∏î‡∏≤‡∏°‡∏≤‡∏ö‡∏±‡∏ß‡∏£‡πå ‡∏ï‡∏±‡∏î", price: 42.00 },
    { name: "CB_‡πÇ‡∏ä‡∏£‡∏¥‡πÇ‡∏ã‡πà ‡∏ï‡∏±‡∏î", price: 41.50 },
    { name: "CB_‡πÄ‡∏ä‡∏î‡∏î‡πâ‡∏≤‡∏ö‡∏•‡πá‡∏≠‡∏Ñ 50%", price: 37.50 },
    { name: "CB_‡∏™‡πÇ‡∏°‡∏Ñ‡∏ä‡∏µ‡∏™ ‡∏ï‡∏±‡∏î‡∏ä‡∏¥‡πâ‡∏ô", price: 32.75 },
    { name: "‡∏™‡∏±‡∏ô‡πÅ‡∏´‡∏•‡∏°‡∏ï‡∏±‡∏î‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏Å", price: 414.00 },
    { name: "‡∏™‡∏±‡∏ô‡∏ô‡∏≠‡∏Å‡∏ï‡∏±‡∏î‡∏™‡πÄ‡∏ï‡πá‡∏Å‡∏Å", price: 414.00 },
    { name: "Au ‡∏û‡∏¥‡∏Ñ‡∏≤‡∏ô‡∏¢‡πà‡∏≤‡∏≠‡∏≠‡πÅ‡∏Å‡∏ô‡∏¥‡∏Ñ", price: 113.00 },
    { name: "Au ‡∏û‡∏¥‡∏Ñ‡∏≤‡∏ô‡∏¢‡πà‡∏≤‡∏≠‡∏≠‡πÅ‡∏Å‡∏ô‡∏¥‡∏Ñ", price: 106.25 },
    { name: "Au ‡∏™‡∏±‡∏ô‡∏Ñ‡∏≠‡∏ß‡∏±‡∏ß‡∏ï‡∏±‡∏î‡∏™‡πÄ‡∏ï‡πá‡∏Å", price: 133.75 },
    { name: "‡∏Å‡∏∏‡πâ‡∏á‡∏Ç‡∏≤‡∏ß", price: 214.75 },
    { name: "‡∏Ñ‡∏≠‡∏´‡∏°‡∏π", price: 61.50 },
    { name: "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π‡∏´‡∏∏‡πà‡∏ô‡πÅ‡∏Å‡∏á", price: 38.75 }
];

const friends = ["‡πÇ‡∏≠‡πÄ‡∏ß‡πà‡∏ô", "‡∏û‡∏•‡∏≠‡∏¢", "‡∏Ñ‡∏£‡∏µ‡∏°", "‡πÄ‡∏Å‡∏°", "‡πÇ‡∏ô‡πà", "‡∏°‡∏¥‡πâ‡∏ô"];
const TOTAL_BILL = 2776.25;

// State: checked[itemIndex][friendIndex]
const checked = items.map(() => friends.map(() => true));

function renderItems() {
    const list = document.getElementById('itemsList');
    list.innerHTML = '';
    items.forEach((item, i) => {
        const card = document.createElement('div');
        card.className = 'item-card';

        const header = document.createElement('div');
        header.className = 'item-header';
        header.innerHTML = `<span class="item-name">${item.name}</span><span class="item-price">${item.price.toFixed(2)} ‡∏ø</span>`;
        card.appendChild(header);

        const row = document.createElement('div');
        row.className = 'friends-row';

        friends.forEach((name, j) => {
            const chip = document.createElement('div');
            chip.className = 'friend-chip' + (checked[i][j] ? ' active' : '');
            chip.innerHTML = `<span class="dot"></span>${name}`;
            chip.addEventListener('click', () => {
                checked[i][j] = !checked[i][j];
                chip.classList.toggle('active', checked[i][j]);
                calculate();
            });
            row.appendChild(chip);
        });

        card.appendChild(row);
        list.appendChild(card);
    });
}

function calculate() {
    const totals = new Array(friends.length).fill(0);
    items.forEach((item, i) => {
        const who = checked[i].reduce((acc, v, j) => { if(v) acc.push(j); return acc; }, []);
        if (who.length > 0) {
            const split = item.price / who.length;
            who.forEach(j => totals[j] += split);
        }
    });

    const checkTotal = totals.reduce((a,b) => a+b, 0);

    // Quick total in header
    document.getElementById('quickTotal').textContent = checkTotal.toFixed(2) + ' ‡∏ø';

    // Person rows
    const rowsEl = document.getElementById('personRows');
    rowsEl.innerHTML = '';
    friends.forEach((name, j) => {
        const div = document.createElement('div');
        div.className = 'person-row';
        div.innerHTML = `<span class="p-name">${name}</span><span class="p-amount">${totals[j].toFixed(2)} ‡∏ø</span>`;
        rowsEl.appendChild(div);
    });

    document.getElementById('billCheck').textContent = `‡∏¢‡∏≠‡∏î‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à ${TOTAL_BILL.toFixed(2)} ‡∏ø | ‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏£: ${checkTotal.toFixed(2)} ‡∏ø`;
}

// Toggle summary bar
document.getElementById('summaryToggle').addEventListener('click', () => {
    document.getElementById('summaryBar').classList.toggle('open');
});

renderItems();
calculate();

// Auto-open summary on load
setTimeout(() => {
    document.getElementById('summaryBar').classList.add('open');
}, 400);
</script>
</body>
</html>
